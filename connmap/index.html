<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>connmap - Visualize your network connections on a world map</title>
  <style>
    /* ── Reset & Base ─────────────────────────────────── */
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg: #0a0a0f;
      --bg-card: #111119;
      --bg-card-hover: #16161f;
      --border: #1e1e2e;
      --text: #c8c8d8;
      --text-dim: #6e6e8a;
      --accent: #0066cc;
      --accent-light: #3388ee;
      --red: #e84040;
      --red-glow: rgba(232, 64, 64, 0.4);
      --mono: 'SF Mono', 'Fira Code', 'Cascadia Code', 'Consolas', 'Monaco', monospace;
      --sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Helvetica, Arial, sans-serif;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: var(--sans);
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    a { color: var(--accent-light); text-decoration: none; transition: color 0.2s; }
    a:hover { color: #66aaff; }
    code, pre { font-family: var(--mono); }

    /* ── Nav ──────────────────────────────────────────── */
    nav {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 100;
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(10, 10, 15, 0.8);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
    }

    .nav-logo {
      font-family: var(--mono);
      font-size: 1.3rem;
      font-weight: 700;
      font-style: italic;
      background: linear-gradient(90deg, #0066cc, #004499);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 2px;
    }

    .nav-links { display: flex; gap: 2rem; }

    .nav-links a {
      color: var(--text-dim);
      font-size: 0.9rem;
      font-weight: 500;
      transition: color 0.2s;
    }

    .nav-links a:hover { color: var(--text); }

    /* ── Hero ─────────────────────────────────────────── */
    .hero {
      position: relative;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 8rem 2rem 4rem;
      overflow: hidden;
    }

    .hero-bg {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse 80% 60% at 50% 40%, rgba(0, 102, 204, 0.08), transparent),
        radial-gradient(ellipse 60% 40% at 30% 70%, rgba(232, 64, 64, 0.04), transparent);
    }

    .hero-grid {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(rgba(255,255,255,0.015) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.015) 1px, transparent 1px);
      background-size: 60px 60px;
      mask-image: radial-gradient(ellipse 70% 50% at 50% 50%, black, transparent);
    }

    .hero-content {
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 800px;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 1rem;
      border: 1px solid var(--border);
      border-radius: 100px;
      font-size: 0.8rem;
      color: var(--text-dim);
      margin-bottom: 2rem;
      background: rgba(255,255,255,0.02);
    }

    .hero-badge .dot {
      width: 6px; height: 6px;
      border-radius: 50%;
      background: var(--red);
      box-shadow: 0 0 8px var(--red-glow);
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; box-shadow: 0 0 8px var(--red-glow); }
      50% { opacity: 0.5; box-shadow: 0 0 16px var(--red-glow); }
    }

    .hero h1 {
      font-family: var(--mono);
      font-size: clamp(3rem, 8vw, 5.5rem);
      font-weight: 700;
      font-style: italic;
      letter-spacing: 3px;
      background: linear-gradient(135deg, #0066cc, #3388ee, #0066cc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.1;
      margin-bottom: 1.5rem;
    }

    .hero p {
      font-size: clamp(1.05rem, 2.5vw, 1.3rem);
      color: var(--text-dim);
      max-width: 600px;
      margin: 0 auto 2.5rem;
      line-height: 1.7;
    }

    .hero-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1.8rem;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      transition: all 0.2s;
      border: none;
      cursor: pointer;
    }

    .btn-primary {
      background: linear-gradient(135deg, #0066cc, #004499);
      color: #fff;
      box-shadow: 0 4px 20px rgba(0, 102, 204, 0.3);
    }

    .btn-primary:hover {
      color: #fff;
      box-shadow: 0 4px 30px rgba(0, 102, 204, 0.5);
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: rgba(255,255,255,0.05);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      color: var(--text);
      background: rgba(255,255,255,0.08);
      border-color: #2e2e4e;
      transform: translateY(-1px);
    }

    /* ── Map Preview ──────────────────────────────────── */
    .hero-preview {
      position: relative;
      z-index: 2;
      margin-top: 4rem;
      width: 100%;
      max-width: 820px;
    }

    .preview-window {
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      background: #000;
      box-shadow:
        0 20px 60px rgba(0,0,0,0.5),
        0 0 0 1px rgba(255,255,255,0.03);
    }

    .preview-titlebar {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 12px 16px;
      background: rgba(255,255,255,0.03);
      border-bottom: 1px solid var(--border);
    }

    .preview-dot {
      width: 10px; height: 10px;
      border-radius: 50%;
    }

    .preview-dot:nth-child(1) { background: #ff5f57; }
    .preview-dot:nth-child(2) { background: #ffbd2e; }
    .preview-dot:nth-child(3) { background: #28c840; }

    .preview-titlebar span {
      flex: 1;
      text-align: center;
      font-size: 0.8rem;
      color: var(--text-dim);
      font-family: var(--mono);
      margin-right: 40px;
    }

    .preview-body {
      position: relative;
      background: #000;
    }

    .preview-body img {
      width: 100%;
      height: auto;
      display: block;
    }

    /* ── Animated connection dots overlay ─────────────── */
    .map-dots {
      position: absolute;
      inset: 0;
    }

    .map-dot {
      position: absolute;
      width: 10px; height: 10px;
      border-radius: 50%;
      background: var(--red);
      box-shadow: 0 0 12px var(--red-glow), 0 0 4px var(--red);
      animation: dotAppear 3s ease-in-out infinite;
    }

    .map-dot::after {
      content: '';
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      border: 1px solid rgba(232, 64, 64, 0.3);
      animation: ring 3s ease-out infinite;
    }

    @keyframes dotAppear {
      0%, 100% { opacity: 0.6; transform: scale(0.9); }
      50% { opacity: 1; transform: scale(1.1); }
    }

    @keyframes ring {
      0% { transform: scale(1); opacity: 0.6; }
      100% { transform: scale(2.5); opacity: 0; }
    }

    .map-dot:nth-child(1) { top: 30%; left: 48%; animation-delay: 0s; }
    .map-dot:nth-child(2) { top: 28%; left: 52%; animation-delay: 0.5s; }
    .map-dot:nth-child(3) { top: 38%; left: 20%; animation-delay: 1s; }
    .map-dot:nth-child(4) { top: 25%; left: 55%; animation-delay: 1.5s; }
    .map-dot:nth-child(5) { top: 32%; left: 67%; animation-delay: 2s; }
    .map-dot:nth-child(6) { top: 55%; left: 78%; animation-delay: 0.7s; }
    .map-dot:nth-child(7) { top: 22%; left: 74%; animation-delay: 1.2s; }

    /* ── Section base ────────────────────────────────── */
    section {
      padding: 6rem 2rem;
      max-width: 1100px;
      margin: 0 auto;
    }

    .section-label {
      display: inline-block;
      font-family: var(--mono);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 3px;
      color: var(--accent);
      margin-bottom: 1rem;
    }

    .section-title {
      font-size: clamp(1.8rem, 4vw, 2.5rem);
      font-weight: 700;
      color: #eee;
      margin-bottom: 1rem;
      line-height: 1.2;
    }

    .section-desc {
      font-size: 1.05rem;
      color: var(--text-dim);
      max-width: 600px;
      margin-bottom: 3rem;
    }

    /* ── Features ─────────────────────────────────────── */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .feature-card {
      padding: 2rem;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--bg-card);
      transition: all 0.3s;
    }

    .feature-card:hover {
      background: var(--bg-card-hover);
      border-color: #2a2a3e;
      transform: translateY(-2px);
    }

    .feature-icon {
      width: 44px; height: 44px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      margin-bottom: 1.2rem;
      background: rgba(0, 102, 204, 0.1);
      border: 1px solid rgba(0, 102, 204, 0.15);
    }

    .feature-icon.red {
      background: rgba(232, 64, 64, 0.1);
      border-color: rgba(232, 64, 64, 0.15);
    }

    .feature-icon.green {
      background: rgba(40, 200, 64, 0.1);
      border-color: rgba(40, 200, 64, 0.15);
    }

    .feature-icon.purple {
      background: rgba(160, 80, 240, 0.1);
      border-color: rgba(160, 80, 240, 0.15);
    }

    .feature-card h3 {
      font-size: 1.1rem;
      color: #ddd;
      margin-bottom: 0.5rem;
    }

    .feature-card p {
      font-size: 0.92rem;
      color: var(--text-dim);
      line-height: 1.6;
    }

    /* ── Install ──────────────────────────────────────── */
    .install-steps {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .install-step {
      display: flex;
      gap: 1.5rem;
      align-items: flex-start;
    }

    .step-number {
      flex-shrink: 0;
      width: 36px; height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--mono);
      font-size: 0.85rem;
      font-weight: 700;
      background: rgba(0, 102, 204, 0.12);
      border: 1px solid rgba(0, 102, 204, 0.25);
      color: var(--accent-light);
    }

    .step-content h3 {
      font-size: 1rem;
      color: #ddd;
      margin-bottom: 0.4rem;
    }

    .step-content p {
      font-size: 0.9rem;
      color: var(--text-dim);
      margin-bottom: 0.8rem;
    }

    .code-block {
      position: relative;
      background: #0d0d14;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem 1.2rem;
      overflow-x: auto;
    }

    .code-block code {
      font-size: 0.85rem;
      color: #b0b0cc;
      white-space: pre;
      line-height: 1.7;
    }

    .code-block .comment { color: #4a4a6a; }
    .code-block .cmd { color: #66aaff; }
    .code-block .flag { color: #c0a0f0; }
    .code-block .string { color: #88cc88; }

    .copy-btn {
      position: absolute;
      top: 0.6rem; right: 0.6rem;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.3rem 0.6rem;
      font-size: 0.75rem;
      color: var(--text-dim);
      cursor: pointer;
      font-family: var(--mono);
      transition: all 0.2s;
    }

    .copy-btn:hover {
      background: rgba(255,255,255,0.1);
      color: var(--text);
    }

    /* ── Deps tabs ────────────────────────────────────── */
    .dep-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .dep-tab {
      padding: 0.5rem 1.2rem;
      border-radius: 6px;
      font-size: 0.85rem;
      font-family: var(--mono);
      cursor: pointer;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-dim);
      transition: all 0.2s;
    }

    .dep-tab.active {
      background: rgba(0, 102, 204, 0.12);
      border-color: rgba(0, 102, 204, 0.3);
      color: var(--accent-light);
    }

    .dep-content { display: none; }
    .dep-content.active { display: block; }

    /* ── Config ───────────────────────────────────────── */
    .config-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      align-items: start;
    }

    .config-table {
      width: 100%;
      border-collapse: collapse;
    }

    .config-table th,
    .config-table td {
      text-align: left;
      padding: 0.8rem 1rem;
      border-bottom: 1px solid var(--border);
      font-size: 0.9rem;
    }

    .config-table th {
      color: var(--text-dim);
      font-weight: 500;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .config-table td:first-child {
      font-family: var(--mono);
      color: var(--accent-light);
      font-size: 0.85rem;
    }

    .config-table td:last-child {
      color: var(--text-dim);
    }

    /* ── How It Works ────────────────────────────────── */
    .how-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      margin-top: 2rem;
    }

    .how-card {
      text-align: center;
      padding: 2rem 1.5rem;
    }

    .how-visual {
      width: 72px; height: 72px;
      margin: 0 auto 1.5rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      position: relative;
    }

    .how-visual.step1 {
      background: rgba(0, 102, 204, 0.1);
      border: 1px solid rgba(0, 102, 204, 0.2);
    }

    .how-visual.step2 {
      background: rgba(160, 80, 240, 0.1);
      border: 1px solid rgba(160, 80, 240, 0.2);
    }

    .how-visual.step3 {
      background: rgba(232, 64, 64, 0.1);
      border: 1px solid rgba(232, 64, 64, 0.2);
    }

    .how-arrow {
      position: absolute;
      right: -2.5rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-dim);
      font-size: 1.2rem;
      opacity: 0.3;
    }

    .how-card h3 {
      font-size: 1rem;
      color: #ddd;
      margin-bottom: 0.5rem;
    }

    .how-card p {
      font-size: 0.88rem;
      color: var(--text-dim);
      line-height: 1.6;
    }

    /* ── Compat ───────────────────────────────────────── */
    .compat-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
    }

    .compat-tag {
      padding: 0.5rem 1.2rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 0.85rem;
      color: var(--text-dim);
      background: var(--bg-card);
      transition: all 0.2s;
    }

    .compat-tag:hover {
      border-color: #2a2a3e;
      color: var(--text);
    }

    /* ── CTA ──────────────────────────────────────────── */
    .cta {
      text-align: center;
      padding: 6rem 2rem;
      position: relative;
    }

    .cta::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse 50% 60% at 50% 50%, rgba(0, 102, 204, 0.06), transparent);
    }

    .cta-content {
      position: relative;
      z-index: 1;
    }

    .cta h2 {
      font-size: clamp(1.8rem, 4vw, 2.4rem);
      color: #eee;
      margin-bottom: 1rem;
    }

    .cta p {
      color: var(--text-dim);
      font-size: 1.05rem;
      margin-bottom: 2rem;
    }

    /* ── Footer ───────────────────────────────────────── */
    footer {
      border-top: 1px solid var(--border);
      padding: 2rem;
      text-align: center;
    }

    .footer-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .footer-left {
      font-family: var(--mono);
      font-size: 0.85rem;
      color: var(--text-dim);
    }

    .footer-links {
      display: flex;
      gap: 1.5rem;
    }

    .footer-links a {
      font-size: 0.85rem;
      color: var(--text-dim);
    }

    .footer-links a:hover { color: var(--text); }

    /* ── Divider ──────────────────────────────────────── */
    .divider {
      max-width: 1100px;
      margin: 0 auto;
      height: 1px;
      background: var(--border);
    }

    /* ── Responsive ───────────────────────────────────── */
    @media (max-width: 768px) {
      nav { padding: 0.8rem 1.2rem; }
      .nav-links { gap: 1rem; }
      .nav-links a { font-size: 0.8rem; }
      section { padding: 4rem 1.2rem; }
      .config-grid { grid-template-columns: 1fr; }
      .how-grid { grid-template-columns: 1fr; }
      .how-arrow { display: none; }
      .hero { padding: 6rem 1.2rem 3rem; }
      .footer-inner { flex-direction: column; text-align: center; }
    }

    @media (max-width: 480px) {
      .nav-links { display: none; }
      .hero-buttons { flex-direction: column; align-items: center; }
      .dep-tabs { flex-wrap: wrap; }
    }
  </style>
</head>
<body>

  <!-- ── Navigation ───────────────────────────────────── -->
  <nav>
    <div class="nav-logo">connmap</div>
    <div class="nav-links">
      <a href="#features">Features</a>
      <a href="#how-it-works">How It Works</a>
      <a href="#installation">Install</a>
      <a href="#config">Config</a>
      <a href="https://github.com/h2337/connmap">GitHub</a>
    </div>
  </nav>

  <!-- ── Hero ─────────────────────────────────────────── -->
  <section class="hero">
    <div class="hero-bg"></div>
    <div class="hero-grid"></div>

    <div class="hero-content">
      <div class="hero-badge">
        <span class="dot"></span>
        Open source &middot; MIT License
      </div>
      <h1>connmap</h1>
      <p>A lightweight desktop widget that visualizes your active network connections on an interactive world map. See where your packets go &mdash; in&nbsp;real&nbsp;time.</p>
      <div class="hero-buttons">
        <a href="#installation" class="btn btn-primary">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Get Started
        </a>
        <a href="https://github.com/h2337/connmap" class="btn btn-secondary" target="_blank" rel="noopener">
          <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"/></svg>
          View on GitHub
        </a>
      </div>
    </div>

    <div class="hero-preview">
      <div class="preview-window">
        <div class="preview-titlebar">
          <div class="preview-dot"></div>
          <div class="preview-dot"></div>
          <div class="preview-dot"></div>
          <span>connmap.elf</span>
        </div>
        <div class="preview-body">
          <img src="sample.png" alt="connmap showing network connections on a world map" />
          <div class="map-dots">
            <div class="map-dot"></div>
            <div class="map-dot"></div>
            <div class="map-dot"></div>
            <div class="map-dot"></div>
            <div class="map-dot"></div>
            <div class="map-dot"></div>
            <div class="map-dot"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ── Features ─────────────────────────────────────── -->
  <div class="divider"></div>

  <section id="features">
    <span class="section-label">Features</span>
    <h2 class="section-title">Everything you need to see your network</h2>
    <p class="section-desc">A single binary, zero runtime config. Just launch it and watch your connections light up across the globe.</p>

    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">
          <svg width="22" height="22" fill="none" stroke="#3388ee" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
        </div>
        <h3>Real-Time Geolocation</h3>
        <p>Maps every active TCP connection to its geographic origin using the MaxMind GeoLite2 database with fast binary search lookups.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon red">
          <svg width="22" height="22" fill="none" stroke="#e84040" stroke-width="2" viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
        </div>
        <h3>Desktop Widget</h3>
        <p>Sits directly on your desktop background as a transparent, draggable widget. No browser needed &mdash; pure native rendering.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon green">
          <svg width="22" height="22" fill="none" stroke="#28c840" stroke-width="2" viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
        </div>
        <h3>Blazingly Lightweight</h3>
        <p>Written in C with ~730 lines of code. Minimal dependencies, minimal memory usage, compiles in under a second.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon purple">
          <svg width="22" height="22" fill="none" stroke="#a050f0" stroke-width="2" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        </div>
        <h3>X11 + Wayland</h3>
        <p>Full support for both X11 and Wayland compositors. Automatically detects your display server and adapts.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <svg width="22" height="22" fill="none" stroke="#3388ee" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
        </div>
        <h3>Configurable</h3>
        <p>Customize position, map size, update interval, and color scheme through a simple text config file.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon red">
          <svg width="22" height="22" fill="none" stroke="#e84040" stroke-width="2" viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        </div>
        <h3>Live Updates</h3>
        <p>Continuously monitors your socket table and refreshes the map at configurable intervals, so you always see what's happening now.</p>
      </div>
    </div>
  </section>

  <!-- ── How It Works ─────────────────────────────────── -->
  <div class="divider"></div>

  <section id="how-it-works">
    <span class="section-label">How It Works</span>
    <h2 class="section-title">Three simple steps, zero effort</h2>
    <p class="section-desc">connmap reads your active connections, resolves their locations, and paints them on your desktop.</p>

    <div class="how-grid">
      <div class="how-card">
        <div class="how-visual step1">
          <svg width="32" height="32" fill="none" stroke="#3388ee" stroke-width="1.5" viewBox="0 0 24 24"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
          <span class="how-arrow">&rarr;</span>
        </div>
        <h3>Detect Connections</h3>
        <p>Reads active TCP connections from the Linux socket table using the <code>ss</code> command every update cycle.</p>
      </div>

      <div class="how-card">
        <div class="how-visual step2">
          <svg width="32" height="32" fill="none" stroke="#a050f0" stroke-width="1.5" viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          <span class="how-arrow">&rarr;</span>
        </div>
        <h3>Geolocate IPs</h3>
        <p>Resolves each remote IP to latitude/longitude coordinates using a local MaxMind GeoLite2 database with O(log n) lookups.</p>
      </div>

      <div class="how-card">
        <div class="how-visual step3">
          <svg width="32" height="32" fill="none" stroke="#e84040" stroke-width="1.5" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
        </div>
        <h3>Render on Map</h3>
        <p>Draws each connection as a glowing red dot on a Mercator-projected world map rendered with Cairo directly on your desktop.</p>
      </div>
    </div>
  </section>

  <!-- ── Installation ─────────────────────────────────── -->
  <div class="divider"></div>

  <section id="installation">
    <span class="section-label">Installation</span>
    <h2 class="section-title">Up and running in 60 seconds</h2>
    <p class="section-desc">Clone, install dependencies, build, and launch.</p>

    <div class="install-steps">

      <div class="install-step">
        <div class="step-number">1</div>
        <div class="step-content">
          <h3>Install dependencies</h3>
          <p>Pick your distro:</p>

          <div class="dep-tabs">
            <button class="dep-tab active" onclick="switchTab(this, 'arch')">Arch</button>
            <button class="dep-tab" onclick="switchTab(this, 'debian')">Debian / Ubuntu</button>
          </div>

          <div class="dep-content active" id="tab-arch">
            <div class="code-block">
              <button class="copy-btn" onclick="copyCode(this)">Copy</button>
              <code><span class="cmd">sudo</span> pacman -S --needed iproute2 libx11 libxext libxfixes cairo unzip</code>
            </div>
          </div>

          <div class="dep-content" id="tab-debian">
            <div class="code-block">
              <button class="copy-btn" onclick="copyCode(this)">Copy</button>
              <code><span class="cmd">sudo</span> apt install iproute2 libx11-dev libxext-dev libxfixes-dev libcairo2-dev unzip</code>
            </div>
          </div>
        </div>
      </div>

      <div class="install-step">
        <div class="step-number">2</div>
        <div class="step-content">
          <h3>Clone and build</h3>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code><span class="cmd">git</span> clone https://github.com/h2337/connmap <span class="flag">--depth</span> 1
<span class="cmd">cd</span> connmap
<span class="cmd">make</span> install</code>
          </div>
        </div>
      </div>

      <div class="install-step">
        <div class="step-number">3</div>
        <div class="step-content">
          <h3>Launch</h3>
          <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code><span class="cmd">connmap.elf</span></code>
          </div>
          <p style="margin-top: 0.6rem; font-size: 0.85rem; color: var(--text-dim);">
            Run in background: <code style="color: #88cc88;">connmap.elf &amp;</code>
            &nbsp;&middot;&nbsp; Auto-start with i3: <code style="color: #88cc88;">exec --no-startup-id connmap.elf</code>
          </p>
        </div>
      </div>

    </div>
  </section>

  <!-- ── Configuration ────────────────────────────────── -->
  <div class="divider"></div>

  <section id="config">
    <span class="section-label">Configuration</span>
    <h2 class="section-title">Simple config, full control</h2>
    <p class="section-desc">Edit <code>~/.config/connmap/connmaprc</code> to customize.</p>

    <div class="config-grid">
      <div class="code-block" style="align-self: start;">
        <code><span class="comment"># ~/.config/connmap/connmaprc</span>

<span class="cmd">location_x</span>       <span class="string">20</span>
<span class="cmd">location_y</span>       <span class="string">500</span>
<span class="cmd">map_width</span>        <span class="string">1000</span>
<span class="cmd">black</span>            <span class="string">false</span>
<span class="cmd">update_interval</span>  <span class="string">1</span></code>
      </div>

      <table class="config-table">
        <thead>
          <tr>
            <th>Option</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>location_x</td>
            <td>Initial horizontal position on your desktop (pixels)</td>
          </tr>
          <tr>
            <td>location_y</td>
            <td>Initial vertical position on your desktop (pixels)</td>
          </tr>
          <tr>
            <td>map_width</td>
            <td>Width of the map in pixels. Height is automatically <code>width / 2</code></td>
          </tr>
          <tr>
            <td>black</td>
            <td>Set to <code>true</code> for black map outlines instead of white</td>
          </tr>
          <tr>
            <td>update_interval</td>
            <td>Seconds between connection refreshes</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- ── Compatibility ────────────────────────────────── -->
  <div class="divider"></div>

  <section id="compat">
    <span class="section-label">Compatibility</span>
    <h2 class="section-title">Works with your desktop</h2>
    <p class="section-desc">Tested across popular Linux desktop environments and window managers.</p>

    <div class="compat-list">
      <span class="compat-tag">i3wm</span>
      <span class="compat-tag">KDE Plasma</span>
      <span class="compat-tag">GNOME</span>
      <span class="compat-tag">Xfce</span>
      <span class="compat-tag">LXDE</span>
      <span class="compat-tag">LXQt</span>
      <span class="compat-tag">MATE</span>
      <span class="compat-tag">Cinnamon</span>
      <span class="compat-tag">Deepin</span>
      <span class="compat-tag">Enlightenment</span>
      <span class="compat-tag">X11</span>
      <span class="compat-tag">Wayland</span>
    </div>
  </section>

  <!-- ── CTA ──────────────────────────────────────────── -->
  <div class="divider"></div>

  <div class="cta">
    <div class="cta-content">
      <h2>See where your packets go</h2>
      <p>Open source, lightweight, and installs in under a minute.</p>
      <div class="hero-buttons">
        <a href="https://github.com/h2337/connmap" class="btn btn-primary" target="_blank" rel="noopener">
          <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"/></svg>
          Star on GitHub
        </a>
        <a href="#installation" class="btn btn-secondary">
          Install Now
        </a>
      </div>
    </div>
  </div>

  <!-- ── Footer ───────────────────────────────────────── -->
  <footer>
    <div class="footer-inner">
      <div class="footer-left">MIT License &middot; connmap</div>
      <div class="footer-links">
        <a href="https://github.com/h2337/connmap">GitHub</a>
        <a href="https://github.com/h2337/connmap/issues">Issues</a>
        <a href="https://www.maxmind.com">MaxMind GeoLite2</a>
      </div>
    </div>
  </footer>

  <!-- ── Scripts ──────────────────────────────────────── -->
  <script>
    function switchTab(btn, id) {
      btn.closest('.step-content').querySelectorAll('.dep-tab').forEach(t => t.classList.remove('active'));
      btn.closest('.step-content').querySelectorAll('.dep-content').forEach(c => c.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById('tab-' + id).classList.add('active');
    }

    function copyCode(btn) {
      const code = btn.parentElement.querySelector('code').textContent;
      navigator.clipboard.writeText(code).then(() => {
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = 'Copy', 1500);
      });
    }

    /* Smooth reveal on scroll */
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.feature-card, .install-step, .how-card, .config-grid').forEach(el => {
      el.style.opacity = '0';
      el.style.transform = 'translateY(20px)';
      el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(el);
    });
  </script>
</body>
</html>
